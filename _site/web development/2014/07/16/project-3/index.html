<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Infopedia</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Chamu Kallem's portfolio">
    <meta name="keywords" content="react,reactjs,angular,ruby,rails,html,css,js,javascript,firebase" />
    <meta name="author" content="Kallem Chamu">
    <link rel="canonical" href="http://localhost:4000/web%20development/2014/07/16/project-3/">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google verification -->
    

    <!-- Bing Verification -->
    

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body id="page-top" class="index">
       <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top"></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#portfolio">Portfolio</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#about">About</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

        <!-- Header -->
    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <img class="img-responsive profile-pic" src="img/portfolio/profile.png" alt="">
                    <div class="intro-text">
                        <span class="name">I'm Chamu</span>
                        <hr class="star-light">
                        <span class="skills">a web developer</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    
    <!-- Portfolio Grid Section -->
    <section id="portfolio">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Portfolio</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                
                    <div class="col-sm-3 portfolio-item">
                        <a href="#portfolioModal-1" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <div class="post-icon"><i class="fa fa-list-alt fa-4x"></i></div>
                            <div class="post-title">ChalkEmOffApp</div>
                            <div class="post-description">Create Todos and chalk 'em off.</div>
                        </a>
                    </div>
                
                    <div class="col-sm-3 portfolio-item">
                        <a href="#portfolioModal-2" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <div class="post-icon"><i class="fa fa-comments-o fa-4x"></i></div>
                            <div class="post-title">Confabb</div>
                            <div class="post-description">A basic chat room app built using Rails and Google Firebase.</div>
                        </a>
                    </div>
                
                    <div class="col-sm-3 portfolio-item">
                        <a href="#portfolioModal-3" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <div class="post-icon"><i class="fa fa-info-circle fa-4x"></i></div>
                            <div class="post-title">Infopedia</div>
                            <div class="post-description">Create wikis and share information.</div>
                        </a>
                    </div>
                
                    <div class="col-sm-3 portfolio-item">
                        <a href="#portfolioModal-4" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <div class="post-icon"><i class="fa fa-calendar-check-o fa-4x"></i></div>
                            <div class="post-title">KiddosCal</div>
                            <div class="post-description">A calendar organizer for kids! Built with ReactJS and Google Firebase.</div>
                        </a>
                    </div>
                
            </div>
        </div>
    </section>

     <!-- About Section -->
    <section class="success" id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>About Me</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-lg-offset-2">
                    <p>
                      I am a software developer with a flair for front-end development. I build web applications using ReactJS, AngularJS and Google Firebase for authentication and storage.
                    </p>
                </div>
                <div class="col-lg-4">
                    <p>
                      I am now looking for opportunities in web development after a leave of absense. I am a US citizen.
                    </p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <a href="https://docs.google.com/document/d/1o96YSvJcOTobmKeksAVqzbZ_PsIj_wBsqcnykipUESU/view" target="_blank" class="btn btn-lg btn-outline">
                        <i class="fa fa-download"></i> See My Profile
                    </a>
                </div>
            </div>
        </div>
    </section>


    
    <!-- Contact Section -->
<section id="contact">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h2>Contact Me</h2>
				<hr class="star-primary">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2">
				<form  action="//formspree.io/chamukallem@gmail.com" method="POST" name="sentMessage" id="contactForm" novalidate>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label>Name</label>
							<input type="text" name="name" class="form-control" placeholder="Name" id="name" required data-validation-required-message="Please enter your name.">
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label>Email Address</label>
							<input type="email" name="_replyto" class="form-control" placeholder="Email Address" id="email" required data-validation-required-message="Please enter your email address.">
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div>
						<input type="hidden"  name="_subject" value="New submission!">
						<input type="text" name="_gotcha" style="display:none" />
					</div>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label>Message</label>
							<textarea rows="5" name="message" class="form-control" placeholder="Message" id="message" required data-validation-required-message="Please enter a message."></textarea>
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<br>
					<div id="success"></div>
					<div class="row">
						<div class="form-group col-xs-12">
							<button type="submit" class="btn btn-success btn-lg">Send</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>

    

        <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4 col-md-offset-4">
                        <h3>Around the Web</h3>
                        <ul class="list-inline">
                            
                            <li>
                                <a href="https://linkedin.com/in/ChamuKallem" class="btn-social btn-outline" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://github.com/chamukallem" class="btn-social btn-outline" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                            </li>
		                    
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; Chamu Kallem 2017
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

     <!-- Portfolio Modals -->
 
    <div class="portfolio-modal modal fade" id="portfolioModal-1" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>ChalkEmOffApp</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/ChalkEmOffApp.png" class="img-responsive img-centered" alt="image-alt">
                            <p>Create Todos and chalk 'em off.</p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com">February 2017</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com">Web Development, AngularJS, Rails</a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            <div class="post-content">#### Summary

Welcome to the organized world! Chalk'EmOff is a Todo App built with Rails 5 REST API and AngularJS front-end.
This Todo web app will help end users build Todo Lists (categories) and individual items under each Todo List (Todo items).

<!-- ![](/img/portfolio/ChalkEmOffApp.png) -->

#### User stories
* A user should be able to sign-up into a free a/c
* A user should be able to login to an already registered a/c
* A user should be able to create/edit/delete todo-lists (categories)
* A user should be able to create/edit/delete items(tasks) under a particular todo-list
* A user should be able list Todo categories and items.

#### Project Set-up

I first built a REST API to add, update, and delete Todos using Rails 5 and 'devise_token_auth' gem for user authentication. I then built an AngularJS US for this REST API.

I created user->Todos->Items models and the routes as shown below:

```ruby
Rails.application.routes.draw do
  mount_devise_token_auth_for 'User', at: 'auth'
  scope module: 'api' do
    namespace :v1 do
      resources :users, only: [:index, :show]
      resources :todos do
        resources :items, only: [:index, :create]
      end
      resources :items, only: [:show, :destroy, :update]
    end
  end
end
```

With this in place, I setup the followin routes established for user/session(auth), todos and todo-items models:

```bash

          Prefix Verb   URI Pattern                               Controller#Action
       new_user_session GET    /auth/sign_in(.:format)            devise_token_auth/sessions#new
           user_session POST   /auth/sign_in(.:format)            devise_token_auth/sessions#create
   destroy_user_session DELETE /auth/sign_out(.:format)           devise_token_auth/sessions#destroy
      new_user_password GET    /auth/password/new(.:format)       devise_token_auth/passwords#new
     edit_user_password GET    /auth/password/edit(.:format)      devise_token_auth/passwords#edit
          user_password PUT    /auth/password(.:format)           devise_token_auth/passwords#update
                        POST   /auth/password(.:format)           devise_token_auth/passwords#create
      user_registration DELETE /auth(.:format)                    devise_token_auth/registrations#destroy
                        POST   /auth(.:format)                    devise_token_auth/registrations#create
    auth_validate_token GET    /auth/validate_token(.:format)     devise_token_auth/token_validations#validate_token
               v1_users GET    /v1/users(.:format)                api/v1/users#index
                v1_user GET    /v1/users/:id(.:format)            api/v1/users#show
          v1_todo_items GET    /v1/todos/:todo_id/items(.:format) api/v1/items#index
                        POST   /v1/todos/:todo_id/items(.:format) api/v1/items#create
               v1_todos GET    /v1/todos(.:format)                api/v1/todos#index
                        POST   /v1/todos(.:format)                api/v1/todos#create
                v1_todo GET    /v1/todos/:id(.:format)            api/v1/todos#show
                        DELETE /v1/todos/:id(.:format)            api/v1/todos#destroy
                v1_item GET    /v1/items/:id(.:format)            api/v1/items#show
                        DELETE /v1/items/:id(.:format)            api/v1/items#destroy
```
#### Testing

I have used the RSpec testing framework to test some of the above routes. I have also used Faker and FactoryGirl to seed testing data.

Testing User authentication as follows:
```ruby
describe 'user unauthenticated ops' do
  it 'registration returns success for valid params' do
        post "/auth", params: {email: Faker::Internet.email, password: "12345678", password_confirmation: "12345678"}
        expect(response).to be_success
  end
  it 'a new user added' do
    expect{
      post "/auth", params: {email: Faker::Internet.email, password: "12345678", password_confirmation: "12345678"}
    }.to change(User, :count).by(1)
  end
end
```

Retrieving and creating todo_lists as follows:
```ruby
describe 'GET /todos/:id' do
  before { get "/v1/todos/#{todo_id}"}
  it "returns success" do
    expect(response).to be_success
  end
  it "returns the todo" do
    expect(json).not_to be_empty
    expect(json['data']['id']).to eq(todo_id.to_s)
  end
end
describe 'POST todos' do
  let(:todo_values) { {title: "Kitchen List", complete: false, user_id: @id}}
  before { post '/v1/todos', params: todo_values}
  it "returns success" do
    expect(response).to be_success
  end
  it "creates a todo" do
    expect(json['data']['attributes']['title']).to eq('Kitchen List')
  end
  it "increases todo count by 1" do
    expect{ post '/v1/todos', params: {title: "Costco List", complete: false, user_id: @id}}.to change(Todo, :count).by(1)
  end
end
```

Another example of testing 'deleting items under a todo_list':
```ruby
describe 'DELETE /v1/items/:id' do
  it "reduces items count by 1" do
    puts "before"
    puts Item.count
    expect{ delete "/v1/items/#{item_id}" }.to change(Item, :count).by(-1)
    puts "after 1st delete"
    puts Item.count
  end
  let(:item_id) { items.last.id }
  it "returns status code" do
    delete "/v1/items/#{item_id}"
    expect(response).to have_http_status(204)
    puts "after 2nd delete"
    puts Item.count
  end
end
```


```ruby
$authProvider.configure({
  apiUrl: 'http://localhost:3000',
  handleRegistrationResponse: function(response) {
        alert("Registration response");
        console.log(response.data);
        return response.data;
    }
    .
    .
    .
    .
    angular
        .module('ChalkEmOffApp', ['ng-token-auth', 'ui.router', 'ui.bootstrap'])
        .config(config);
```
![](/img/portfolio/ChalkEmOffSignin.png)

#### Views
Once the user is signed-up/signed-in, the todoCtrl retrieves all (if previously created) todos and their items into $scope for that particular user_id by making the api-call to the ChalkEmOff app.

```ruby
$http.get('http://localhost:3000/v1/todos').
then(function(responseList) {
    console.log(responseList);
    // $scope.users = response.data;
    angular.forEach(responseList.data.data, function(obj){
      if (obj.attributes["user-id"] == user_id){
        Todos.push(obj);
      }
    });
    // $scope.Todos = responseList.data.data;
    $scope.Todos = Todos;
```
As the todos.html view loads, the $scope.Todos are read into the view.
```
<div class="list-group todos-left-panel-section">
  <div ng-repeat="todo in Todos" >
        <div class="list-group-item todo-name todo-name-hover" ng-click="todolist.showTodoItems(todo.id, todo.attributes.title )">
            {{todo.attributes.title}}</br>
        </div>
  </div>
  <div class="list-group-item new-todo-button">
    <button type="button" name="new-todo-button" ng-click="todolist.createTodo()" ng-model="newTodo">New Todo</button>
  </div>
</div>
```
![](/img/portfolio/ChalkEmOffTodoList.png)

#### Controllers

userAuthCtrl and todosCtrl are the two main controller functionality.

$auth.submitLogin, $auth.submitRegistration and $auth.signOut are managed by the userAuthCtrl.

On the other hand, todosCtrl manages the api-calls to ChalkEmOff api-only app to make the necessary calls to create/show/delete/update the todolist and its items.

Sample code for few basic operations:
```ruby
this.createTodoCat = function(){
  var catName = document.getElementById('newTodoName').value;
  console.log(catName);
  var data = {"title": catName, "complete": false, "user_id": user_id};
  $http.post('http://localhost:3000/v1/todos/', JSON.stringify(data)).
  then(function(responseTodos) {
      console.log(responseTodos);
      if (responseTodos.data.data){
        $scope.Todos.push(responseTodos.data.data);
        $scope.newTodo = false;
        $scope.Todos.Items = [];
        $scope.Todos.title = catName;
        $scope.Todos.todo_id = responseTodos.data.data.id;
      }
     });
  document.getElementById('newTodoName').value = "";
};
this.addTodoItem = function(){
  var itemName = document.getElementById('newItemName').value;
  console.log(itemName);
  var data = {"name": itemName, "done": false};
  var str = $scope.Todos.todo_id + '';
  $http.post('http://localhost:3000/v1/todos/' + str + '/items', JSON.stringify(data)).
    then(function(responseNewItem) {
      console.log(responseNewItem);
      if (responseNewItem.data.data){
        $scope.Todos.Items.push(responseNewItem.data.data);
      }
     });
   document.getElementById('newItemName').value = "";
};
this.deleteItem = function(item_id){
  var itemIndex = $scope.Todos.Items.map(function(e) { return e.id; }).indexOf(item_id);
  var str = item_id + '';
  $http.delete('http://localhost:3000/v1/items/' + str).
    then(function(delteResponse) {
      console.log(delteResponse);
      $scope.Todos.Items.splice(itemIndex, 1);
     });
  console.log("entered delete Item");
};
this.deleteTodo= function(todo_id){
  var todoIndex = $scope.Todos.map(function(e) { return e.id; }).indexOf(todo_id);
  var str = todo_id + '';
  $http.delete('http://localhost:3000/v1/todos/' + str).
    then(function(delteResponse) {
      console.log(delteResponse);
      $scope.Todos.splice(todoIndex, 1);
      if ($scope.Todos.length > 0){
        $scope.Todos.title = $scope.Todos[0].attributes.title;
        $scope.Todos.todo_id = $scope.Todos[0].todo_id;
        $state.reload();
      }
     });
  console.log("entered delete todo");
};
```
The JSON response from these api-calls has been manipulated to fit the controls on the views.
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-2" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Confabb</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/ConfabbAppImage2x.png" class="img-responsive img-centered" alt="image-alt">
                            <p>A basic chat room app built using Rails and Google Firebase.</p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com">April 2014</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com">Web Development</a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            <div class="post-content">#### Summary

ConfabbingApp is a simple chat room app where participants can create chat rooms and chat in those rooms. All rooms are available to all the users at any given time after they sign-up/sign-in.

#### Project set-up
I built this single page web application with AngularJS for the frontend and Google Firebase for authentication and data storage.  
This was my first project using Firebase for authentication and storage. I used the auth.signInWithEmailAndPassword API to register the users and allow them to sign_in with their email.

<!-- With the help of the [Firebase docs](https://firebase.google.com/docs/web/setup) initializing firebase on index.html as follows: -->

<!-- ```javascript
var config = {

  apiKey: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  authDomain: "bloc-test-aebd8.firebaseapp.com",
  databaseURL: "https://bloc-test-aebd8.firebaseio.com",
  storageBucket: "bloc-test-aebd8.appspot.com",
  messagingSenderId: "****************"
};
firebase.initializeApp(config);


auth.signInWithEmailAndPassword
auth.createUserWithEmailAndPassword
firebase.auth().onAuthStateChanged

``` -->

<!-- Using the above calls to firebase a user can either sign-up/sign-in or enter an already logged-in session. -->

![](/img/portfolio/ConfabSign-inpage.png)

On success, a user can start chatting in any of the Confabbing rooms or create a new Confab room.

roomCtrl (controller) and roomService (service) handle the messages sent accross the room for a user.

```javascript
service.addRoom
service.displayRoom
service.send
service.updateUserInFB
service.logout
```
The above calls to the roomService take care of all the operations of this Simple Chat room.

![](/img/portfolio/ConfabChatRooms.png)

The user/room model in the Firebase is as shown below.

![](/img/portfolio/confabDatabase.png)
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-3" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Infopedia</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/InfopediaWelcome.png" class="img-responsive img-centered" alt="image-alt">
                            <p>Create wikis and share information.</p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com">April 2014</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com">Web Development</a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            <div class="post-content"><h4 id="summary">Summary</h4>

<p>This application that allows users to create wikis (public and private). It lets users upgrade to a premium membership in order to create private wikis and add other users as collaborators for the private wiki.</p>

<h4 id="project-set-up">Project set-up</h4>
<p>This application is developed with AngularJS as frontend and Rails backend. I have integrated <a href="https://stripe.com/">Stripe</a> for users to pay (test-mode) using credit cards and upgrade their a/c on Infopedia to a premium membership.
I also used <a href="https://github.com/plataformatec/devise">Devise</a> gem for user authentication. User model defined as</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">has_many</span> <span class="ss">:collaborators</span>
  <span class="n">has_many</span> <span class="ss">:wikis</span><span class="p">,</span> <span class="ss">through: :collaborators</span>

  <span class="n">devise</span> <span class="ss">:database_authenticatable</span><span class="p">,</span> <span class="ss">:registerable</span><span class="p">,</span>
         <span class="ss">:recoverable</span><span class="p">,</span> <span class="ss">:rememberable</span><span class="p">,</span> <span class="ss">:trackable</span><span class="p">,</span> <span class="ss">:validatable</span>
  <span class="n">enum</span> <span class="ss">role: </span><span class="p">[</span><span class="ss">:admin</span><span class="p">,</span> <span class="ss">:standard</span><span class="p">,</span> <span class="ss">:premium</span><span class="p">]</span>
  <span class="n">after_initialize</span> <span class="ss">:set_default_role</span><span class="p">,</span> <span class="ss">:if</span> <span class="o">=&gt;</span> <span class="ss">:new_record?</span>
  <span class="n">delegate</span> <span class="ss">:wikis</span><span class="p">,</span> <span class="ss">to: :collaborators</span>

  <span class="k">def</span> <span class="nf">set_default_role</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">role</span> <span class="o">||=</span> <span class="ss">:standard</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">collaborators</span>
    <span class="no">Collaborator</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">user_id: </span><span class="nb">id</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>I defined three user roles/authorization. Admin, standard and premium with default role being ‘standard’.
I used <a href="https://github.com/elabs/pundit">Pundit</a> gem for scoping out authorization for these roles.</p>

<p><img src="/img/portfolio/InfopediaWelcome.png" alt="" /></p>

<p>Once the user model is created using the Devise gem, I created the Wiki model adding the User reference.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rails g model Wiki title:string body:text private:boolean user:references:index
</code></pre>
</div>
<p>Defining all the routes as</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Rails.application.routes.draw do
  # resources :wikis
  resources :wikis do
    resources :collaborators, only: [:create, :build, :destroy]
  end
  resources :charges, only: [:new, :create, :destroy]
  devise_for :users, controllers: {registrations: 'registrations'}
  get 'about' =&gt; 'welcome#about'
  root 'welcome#index'
  resources :users do
    member do
      get :confirm_email
    end
  end

end
</code></pre>
</div>
<p><img src="/img/portfolio/InfopediaListWikis.png" alt="" /></p>

<p><img src="/img/portfolio/InfopediaEditWiki.png" alt="" /></p>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-4" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>KiddosCal</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/KiddosCalimage.png" class="img-responsive img-centered" alt="image-alt">
                            <p>A calendar organizer for kids! Built with ReactJS and Google Firebase.</p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com">April 2014</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com">Web Development</a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            <div class="post-content"><h4 id="summary">Summary</h4>

<p>This is a Kids Calendar Organizer App that allows kids to organize their chores/daily activities and let them earn points as they check them off when completed!!!!</p>

<p><img src="/img/portfolio/KiddosCalTasksnPoints.png" alt="" /></p>

<h4 id="kid-stories">Kid stories</h4>
<p>A kid should be able to:</p>
<ul>
  <li>sign-up (parent email to be entered during sign-up) or sign_in</li>
  <li>select the current date or future date (in that month) in the Calendar to create todo-lists</li>
  <li>assign points for each task listed (based on their parents feedback)</li>
  <li>select previous dates (in that month) to view(only) their task status</li>
  <li>add a task in the todo-list on current and future date with points associated with that task and should see ‘Points lost(incomplete tasks)’ increase by 1.</li>
  <li>check-off a task when completed and should see ‘Points lost’ decrease by 1 and Total points increase by the points associated with that task.</li>
  <li>should be able to toggle ‘Show Completed ToDos’ and see the results accordingly.</li>
  <li>should not be able to delete tasks once listed.</li>
  <li>should see Total points reset to 0 when Calendar month changes.</li>
  <li>should be able to sign_out</li>
</ul>

<h4 id="project-set-up">Project Set-up</h4>
<p>This web app was done using ReactJS as frontend and Firebase for authentication and storage.</p>

<p>The ‘Main’ component in this app has three sub-components Login, SignUp and the actual TaskSection as show in the picture above.
The routes for these components have been setup as:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Router</span> <span class="nx">history</span><span class="o">=</span><span class="p">{</span><span class="nx">browserHistory</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"/"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Main</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"login"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Login</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"signup"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">SignUp</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"tasksection"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">TaskSection</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Router&gt;</span><span class="err">,
</span>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"app"</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
</div>
<p><img src="/img/portfolio/KiddosCalSignUp.png" alt="" /></p>

<p>Firebase authentication for login and sign-up are handled from Login.jsx and SignUp.jsx components.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">handleLogin</span> <span class="o">=</span> <span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
  <span class="kr">const</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">auth</span><span class="p">();</span>
  <span class="nx">auth</span><span class="p">.</span><span class="nx">signInWithEmailAndPassword</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">userInfo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">userid</span> <span class="o">=</span> <span class="nx">userInfo</span><span class="p">.</span><span class="nx">uid</span><span class="p">;</span>
      <span class="kr">const</span> <span class="nx">dateString</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">().</span><span class="nx">format</span><span class="p">(</span><span class="s1">'YYYY-MM-DD'</span><span class="p">);</span>
      <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"loginSuccess"</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">browserHistory</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="na">pathname</span><span class="p">:</span> <span class="s1">'/tasksection'</span><span class="p">,</span>
          <span class="na">state</span><span class="p">:</span> <span class="p">{</span><span class="na">userid</span><span class="p">:</span> <span class="nx">userid</span><span class="p">,</span>
              <span class="na">dateString</span><span class="p">:</span> <span class="nx">dateString</span>
              <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">}).</span><span class="k">catch</span> <span class="p">(</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Login failed'</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>handleSignUp = (email, password, parentemail) =&gt;{
  const auth = firebase.auth();
  const firebaseRef = firebase.database().ref().child('users/');
  let loginSuccess = false;
  auth.createUserWithEmailAndPassword(email, password)
      .then((userInfo) =&gt; {
          console.log('Entered signUp success');
          const userid = userInfo.uid;
          const dateString = moment().format('YYYY-MM-DD');
          localStorage.setItem("loginSuccess",true);
          firebaseRef.child('${userid}/').update({
              email: email,
              parentemail: parentemail,
          });
          console.log('Finished updating database');
          browserHistory.push({
              pathname: '/tasksection',
              state: {userid: userid,
                  dateString: dateString
              }
          });
      }).catch ( (e) =&gt; {
      console.log('Login failed', e);
});
</code></pre>
</div>
<p>In the TaskSection component every UI control is a jsx component. On successful login/signup, componentWillMount is fired to load the TaskSection with the initial props.</p>

<p><img src="/img/portfolio/KiddosCalComponents.png" alt="" /></p>

<p>Each component has its events fired and subsequently handled by the TaskSection component. After successful event handling of any of the components, the componentDidUpdate is fired to set the state data.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">componentDidUpdate</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span><span class="nx">todos</span><span class="p">,</span> <span class="nx">userid</span><span class="p">,</span> <span class="nx">dateString</span><span class="p">,</span> <span class="nx">totalPoints</span><span class="p">,</span> <span class="nx">lostPoints</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
        <span class="nx">TodoAPI</span><span class="p">.</span><span class="nx">setTodos</span><span class="p">(</span><span class="nx">todos</span><span class="p">,</span> <span class="nx">userid</span><span class="p">,</span> <span class="nx">dateString</span><span class="p">,</span> <span class="nx">totalPoints</span><span class="p">,</span> <span class="nx">lostPoints</span><span class="p">);</span>
    <span class="p">};</span>
</code></pre>
</div>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">setTodos</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">todos</span><span class="p">,</span> <span class="nx">userid</span><span class="p">,</span> <span class="nx">dateString</span><span class="p">,</span> <span class="nx">totalPoints</span><span class="p">,</span> <span class="nx">lostPoints</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">monthString</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">().</span><span class="nx">format</span><span class="p">(</span><span class="s2">"YYYY-MMM"</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">todos</span><span class="p">)){</span>
            <span class="kd">var</span> <span class="nx">firebaseDateRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">().</span><span class="nx">child</span><span class="p">(</span><span class="err">`</span><span class="nx">users</span><span class="o">/</span><span class="nx">$</span><span class="p">{</span><span class="nx">userid</span><span class="p">}</span><span class="sr">/days/</span><span class="nx">$</span><span class="p">{</span><span class="nx">dateString</span><span class="p">}</span><span class="sr">/`</span><span class="se">)</span><span class="err">;
</span>            <span class="kd">var</span> <span class="nx">dateRef</span> <span class="o">=</span> <span class="nx">firebaseDateRef</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span>
                <span class="nx">todos</span>
            <span class="p">});</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">totalPoints</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">firebaseUserRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">().</span><span class="nx">child</span><span class="p">(</span><span class="err">`</span><span class="nx">users</span><span class="o">/</span><span class="nx">$</span><span class="p">{</span><span class="nx">userid</span><span class="p">}</span><span class="sr">/points/</span><span class="nx">$</span><span class="p">{</span><span class="nx">monthString</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
                <span class="nx">firebaseUserRef</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="nx">totalPoints</span><span class="p">,</span> <span class="nx">lostPoints</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
</div>
<p>In Firebase the data model is set as</p>

<p><img src="/img/portfolio/KiddosCalDataModel.png" alt="" /></p>

<p>I  used <a href="http://clauderic.github.io/react-infinite-calendar/#/basic-settings/basic-configuration?_k=2g3pc7"> React Infinite Calendar</a> library for the calendar component.</p>

<h4 id="next-steps">Next Steps</h4>
<p>This app has been on my TodoList for a long time for my kids to organize their work. I plan to improve this app further with the next version(s) having a parent(admin) feature where the parents can manage adding templates to the kids tasks lists and pre-determine the points for tasks instead of kids assigning the points.
I plan to make this a mobile/tablet app using React Native.</p>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    
    <script src="/js/contact_me_static.js"></script>
    

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>

    

    </body>
</html>